<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Каталог металлоконструкций ООО «Сибспецмаш»">
  <title>Каталог - ООО «Сибспецмаш»</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
   <script src="https://www.google.com/recaptcha/api.js " async defer></script>
     <!-- jQuery и Inputmask -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js "></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js "></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Custom Catalog CSS -->
  <style>
    .product-card {
      transition: transform 0.2s;
    }
    .product-card:hover {
      transform: translateY(-5px);
    }
    .price-tag {
      color: #198754;
      font-weight: bold;
    }
    .stock-info {
      color: #6c757d;
      font-size: 0.9rem;
    }
    .contact-modal-body p {
      font-size: 0.95rem;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="index.html">
      <img src="logo.png" alt="Логотип Сибспецмаш" width="150" class="me-2">
      <span></span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="index.html#services">Услуги</a></li>
        <li class="nav-item"><a class="nav-link " href="#">Каталог</a></li>
        <li class="nav-item"><a class="nav-link " href="price.html">Прайс-лист</a></li>
        <li class="nav-item"><a class="nav-link" href="https://azk52.github.io/diplom/#contact">Контакты</a></li>
       <li class="nav-item"><a class="nav-link " href="company.html">О компании</a></li>
        <li class="nav-item"><a class="nav-link" href="guarantees.html">Гарантии</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Catalog -->
<section class="py-5 mt-5">
  <div class="container">
    <h2 class="text-center mb-5">Расширенный каталог продукции</h2>

    <div class="row row-cols-1 row-cols-md-3 g-4">
      <!-- Product 1 -->
      <div class="col">
        <div class="card shadow-sm h-100 product-card"
             data-bs-toggle="modal"
             data-bs-target="#productModal"
             data-name="Ферма"
             data-desc="Профильная ферма из стали S345. Высота 2 м, длина до 12 м."
             data-image="ferma.jpg"
             data-price="180 000"
             data-stock="50">
          <img src="ferma.jpg" class="card-img-top" alt="Ферма">
          <div class="card-body">
            <h5 class="card-title">Ферма</h5>
            <p class="price-tag">Цена: 180 000 руб.</p>
            
            <button class="btn btn-primary w-100">Подробнее</button>
          </div>
        </div>
      </div>

      <!-- Product 2 -->
      <div class="col">
        <div class="card shadow-sm h-100 product-card"
             data-bs-toggle="modal"
             data-bs-target="#productModal"
             data-name="Колонна"
             data-desc="Круглая опорная колонна диаметром 300 мм, высота до 10 м."
             data-image="kolonny.jpg"
             data-price="19 500"
             data-stock="30">
          <img src="kolonny.jpg" class="card-img-top" alt="Колонна">
          <div class="card-body">
            <h5 class="card-title">Колонна</h5>
            <p class="price-tag">Цена: 19 500 руб.</p>
            
            <button class="btn btn-primary w-100">Подробнее</button>
          </div>
        </div>
      </div>

      <!-- Product 3 -->
      <div class="col">
        <div class="card shadow-sm h-100 product-card"
             data-bs-toggle="modal"
             data-bs-target="#productModal"
             data-name="Двутавровая балка"
             data-desc="Двутавровая балка из стали марки С345, стандарт длина 12 м."
             data-image="balok.jpg"
             data-price="19 700"
             data-stock="40">
          <img src="balok.jpg" class="card-img-top" alt="Балка">
          <div class="card-body">
            <h5 class="card-title">Двутавровая балка</h5>
            <p class="price-tag">Цена: 19 700 руб.</p>
           
            <button class="btn btn-primary w-100">Подробнее</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Modal: Product Details -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Продукт</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center">
        <img id="modalImage" src="" class="img-fluid rounded mb-4" alt="Продукт">
        <h4 id="modalName" class="mb-3"></h4>
        <p id="modalDescription" class="lead mb-3"></p>
        <p id="modalPrice" class="price-tag fs-5 mb-2"></p>
        <p id="modalStock" class="stock-info mb-4"></p>
        <button class="btn btn-success btn-lg w-50" onclick="addToCart()">Оформить</button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Продолжить покупки</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Contacts -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="contactModalLabel">Контакты</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center contact-modal-body">
        <p class="mb-2"><strong>Телефон:</strong> +7 (908) 649-60-90</p>
        <p class="mb-2"><strong>Email:</strong> reserve.fallback@bk.ru</p>
        <p class="mb-2"><strong>Адрес:</strong> г. Ангарск, кв-л 106, д. 1, помещ. 65</p>
        <button class="btn btn-primary w-100" onclick="scrollToContact()">Оставить заявку</button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
      </div>
    </div>
  </div>
</div>
<!-- Airtable Form Section -->
<section id="airtableForm" class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">Предложите свою продукцию</h2>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <form id="airtableForm" class="needs-validation" novalidate>
                    <!-- Название продукта -->
                    <div class="mb-3">
                        <label for="title" class="form-label">Название продукта</label>
                        <input type="text" class="form-control" id="title" name="title" required>
                        <div class="invalid-feedback">Пожалуйста, введите название продукта.</div>
                    </div>

                    <!-- Ссылка на изображение -->
                    <div class="mb-3">
                        <label for="url" class="form-label">Ссылка на изображение (URL)</label>
                        <input type="url" class="form-control" id="url" name="url" required>
                        <div class="invalid-feedback">Введите корректный URL изображения.</div>
                    </div>

                    <!-- Теги -->
                    <div class="mb-3">
                        <label for="tags" class="form-label">Теги (через запятую)</label>
                        <input type="text" class="form-control" id="tags" name="tags">
                        <div class="form-text">Пример: "металлоконструкции,фермы,колонны"</div>
                    </div>

                    <!-- reCAPTCHA -->
                    <div class="g-recaptcha" data-sitekey="6LeaCj8rAAAAAFmJgAGKSnoCvvDCdG3F7D_Xbt_7"></div>
                    <div id="captchaError" class="text-danger mt-2 d-none">
                        Пожалуйста, подтвердите, что вы не робот
                    </div>

                    <!-- Кнопка отправки -->
                    <button type="submit" class="btn btn-primary w-100 mt-3">Добавить в каталог</button>

                    <!-- Сообщение об успехе -->
                    <div id="successMessage" class="alert alert-success mt-3 d-none" role="alert">
                        Продукт успешно предложен!
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

  <script>
 // Отправка данных в Airtable
document.getElementById('airtableForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Получаем значения
    const title = document.querySelector('[name="title"]').value.trim();
    const url = document.querySelector('[name="url"]').value.trim();
    const tags = document.querySelector('[name="tags"]').value
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag !== '');

    const captchaError = document.getElementById('captchaError');
    const successMessage = document.getElementById('successMessage');
    const form = document.getElementById('airtableForm');
    
    // Сбрасываем ошибки
    captchaError.classList.add('d-none');
    successMessage.classList.add('d-none');
    
    // Сбрасываем стили валидации
    document.querySelectorAll('.is-invalid').forEach(input => input.classList.remove('is-invalid'));
    document.querySelectorAll('.invalid-feedback').forEach(feedback => feedback.classList.remove('d-block'));

    // Валидация обязательных полей
    let isValid = true;

    if (!title) {
        document.getElementById('title').classList.add('is-invalid');
        document.querySelector('#title + .invalid-feedback').classList.add('d-block');
        isValid = false;
    }

    if (!url) {
        document.getElementById('url').classList.add('is-invalid');
        document.querySelector('#url + .invalid-feedback').classList.add('d-block');
        isValid = false;
    } else {
        const urlPattern = /^(https?:\/\/\S+)$/i;
        if (!urlPattern.test(url)) {
            document.getElementById('url').classList.add('is-invalid');
            document.querySelector('#url + .invalid-feedback').textContent = 'Введите корректный URL';
            isValid = false;
        }
    }

    // Проверка reCAPTCHA
    const token = grecaptcha.getResponse();
    if (!token) {
        captchaError.classList.remove('d-none');
        isValid = false;
    }

    // Если не прошла валидация — останавливаем отправку
    if (!isValid) return false;

    // Отправка данных в Airtable
    const apiKey = 'patrxA9ZqPy0eYTjE.86d953a7de0a4c7c2f8d89b1e72e5b4ef9d1c4b8b5e50286ed4e932cfad4a4cd';
    const baseId = 'appWqIozRKGDvzGr8';
    const tableName = 'Gallery';

    try {
        const response = await fetch(`https://api.airtable.com/v0/${baseId}/${tableName}`, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${apiKey}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                fields: {
                    Title: title,
                    'Image URL': url,
                    Tags: tags.join(',') // или отправляйте как массив, если поле поддерживает
                }
            })
        });

        if (response.ok) {
            successMessage.classList.remove('d-none');
            form.reset();
            grecaptcha.reset(); // Сбрасываем reCAPTCHA
        } else {
            const errorData = await response.json();
            console.error('Ошибка Airtable:', errorData);
            alert('Ошибка отправки данных:\n' + JSON.stringify(errorData));
        }
    } catch (error) {
        console.error('Ошибка сети:', error);
        alert('Успех!.');
    }
});
  </script>



  
<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>


  function scrollToContact() {
    const contactSection = document.getElementById('contact');
    if (contactSection) {
        contactSection.scrollIntoView({ behavior: 'smooth' });
    } else {
        window.location.href = 'index.html#contact';
    }
}
  
  // Обработчик клика по карточке товара
  document.querySelectorAll('.product-card').forEach(card => {
    card.addEventListener('click', () => {
      const name = card.dataset.name;
      const description = card.dataset.desc;
      const price = card.dataset.price;
      
      const image = card.dataset.image;

      document.getElementById('modalName').textContent = name;
      document.getElementById('modalDescription').textContent = description;
      document.getElementById('modalPrice').textContent = `Цена: ${price} руб.`;
      
      document.getElementById('modalImage').src = image;
    });
  });

  // Функция открытия контактов
  function addToCart() {
    const productModal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
    productModal.hide();

    const contactModal = new bootstrap.Modal(document.getElementById('contactModal'));
    contactModal.show();
  }
</script>
  

  
<!-- Нижний футер -->
<footer class="bg-light py-5">
  <div class="container">
    <div class="row mb-4">
      <!-- Продукция -->
      <div class="col-md-2">
        <h5>Продукция</h5>
        <ul class="list-unstyled">
          <li><a href="catalog.html" class="footer-link">Металлоконструкции</a></li>
        </ul>
      </div>

      <!-- Услуги -->
      <div class="col-md-2">
        <h5>Услуги</h5>
        <ul class="list-unstyled">
          <li><a href="services-proejction.html" class="footer-link">Проектирование</a></li>
          <li><a href="#">Производство</a></li>
          <li><a href="#">Монтаж</a></li>
        </ul>
      </div>

      <!-- Клиентам -->
      <div class="col-md-2">
        <h5>Клиентам</h5>
        <ul class="list-unstyled">
          <li><a href="guarantees.html" class="footer-link">Гарантия качества</a></li>
        </ul>
      </div>

      <!-- О компании -->
      <div class="col-md-2">
        <h5>О компании</h5>
        <ul class="list-unstyled">
          <li><a href="company.html" class="footer-link">Справочник</a></li>
        </ul>
      </div>

      <!-- Контакты -->
      <div class="col-md-3">
        <h5>Контакты</h5>
        <p>Режим работы: пн-пт 08:00-18:00</p>
        <p>Адрес: 665813, Иркутская область, город Ангарск, кв-л 106, д. 1, помещ. 65 </p>
      </div>
    </div>

    <hr>

    <div class="row align-items-center">
      <div class="col-md-6 text-center text-md-start">
        <h2 class="mb-0">8 908 649 60 90</h2>
      </div>
      <div class="col-md-3 text-center">
        <a href="mailto:reserve.fallback@bk.ru" class="text-primary">reserve.fallback@bk.ru</a>
      </div>
      <div class="col-md-3 text-center">
        <a href="success.html" class="text-muted">Правила пользования сайтом</a>
      </div>
    </div>
    <!-- Footer -->
<footer class="bg-light text-center py-4 mt-5">
  <div class="container">
    <p class="mb-0">&copy; 2025 ООО «Сибспецмаш». Все права защищены.</p>
  </div>
</footer>

  
<!-- Кнопка "Наверх" -->
<button id="backToTop" onclick="scrollToTop()" class="btn btn-primary">
  <i class="bi bi-arrow-up"></i> Наверх
</button>

<!-- Стили для кнопки -->
<style>
  /* Стили для валидации */
.was-validated .form-control:invalid {
    border-color: #dc3545;
}

.was-validated .form-control:invalid ~ .invalid-feedback,
.was-validated .form-control:invalid ~ .invalid-tooltip {
    display: block;
}

/* Анимация для CAPTCHA */
#captchaError {
    animation: shake 0.5s ease-in-out;
}
  #backToTop {
    position: fixed;
    bottom: 15px;
    right: 20px;
    z-index: 1000;
    display: none;
    transition: opacity 0.3s ease;
  }
</style>

<!-- Скрипт для отображения при скролле -->
<script>
  window.addEventListener('scroll', function () {
    const btn = document.getElementById('backToTop');
    btn.style.display = (window.pageYOffset > 300) ? 'block' : 'none';
  });

  function scrollToTop() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  }
</script>
  </div>
</footer>
</body>
</html>
